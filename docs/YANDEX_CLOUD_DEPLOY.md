# üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Yandex Cloud Serverless Containers

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Yandex Cloud.

## ‚úÖ –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ

- ‚úÖ `next.config.mjs` - –¥–æ–±–∞–≤–ª–µ–Ω `output: 'standalone'` –¥–ª—è Docker
- ‚úÖ `Dockerfile` - –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ `.dockerignore` - –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ GitHub Actions workflow - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

## üìã –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Yandex Cloud

### 1.1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://console.cloud.yandex.ru/
2. –ï—Å–ª–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ
3. –ó–∞–ø–æ–º–Ω–∏—Ç–µ **ID –∫–∞—Ç–∞–ª–æ–≥–∞** (Folder ID) - –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–∑–∂–µ

### 1.2. –°–æ–∑–¥–∞–Ω–∏–µ Container Registry

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Container Registry**
2. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å —Ä–µ–µ—Å—Ç—Ä**
3. –£–∫–∞–∂–∏—Ç–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `jhelper-bot-registry`)
4. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–∞–ª–æ–≥
5. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å**
6. **–ó–∞–ø–æ–º–Ω–∏—Ç–µ ID —Ä–µ–µ—Å—Ç—Ä–∞** (Registry ID) - –±—É–¥–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ `crp1234567890abcdef`

### 1.3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ Service Account

–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç `deploy-bot` —Å —Ä–æ–ª—å—é `editor`.

**–†–æ–ª—å `editor` –¥–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞:**
- ‚úÖ `container-registry.images.pusher` - –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—Ä–∞–∑–æ–≤
- ‚úÖ `container-registry.images.puller` - –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤
- ‚úÖ `serverless.containers.deployer` - –¥–ª—è –¥–µ–ø–ª–æ—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ `serverless.containers.invoker` - –¥–ª—è –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–ª—é—á–∞ –¥–æ—Å—Ç—É–ø–∞:

–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è `deploy-bot`. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Service Accounts** ‚Üí `deploy-bot`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏**
3. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞**
4. **–°–û–•–†–ê–ù–ò–¢–ï Access Key ID –∏ Secret Access Key** - –æ–Ω–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –¥–ª—è GitHub Secrets

**–í–∞–∂–Ω–æ:** –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ - —ç—Ç–æ AWS-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∫–ª—é—á, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ Container Registry –∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å yc CLI.

### 1.4. –°–æ–∑–¥–∞–Ω–∏–µ Serverless Container

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Serverless Containers**
2. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**
3. –£–∫–∞–∂–∏—Ç–µ –∏–º—è: `jhelper-bot`
4. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–∞–ª–æ–≥
5. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å**
6. **–ó–∞–ø–æ–º–Ω–∏—Ç–µ –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** - `jhelper-bot`

## üìã –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
3. –ù–∞–∂–º–∏—Ç–µ **New repository secret**

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã:

#### `YC_ACCESS_KEY_ID`
- **–ó–Ω–∞—á–µ–Ω–∏–µ**: Access Key ID –∏–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–ª—é—á–∞ –¥–æ—Å—Ç—É–ø–∞ `deploy-bot`
- **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Access Key ID –∏–∑ –≤–∞—à–µ–≥–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–ª—é—á–∞

#### `YC_SECRET_ACCESS_KEY`
- **–ó–Ω–∞—á–µ–Ω–∏–µ**: Secret Access Key –∏–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–ª—é—á–∞ –¥–æ—Å—Ç—É–ø–∞ `deploy-bot`
- **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Secret Access Key –∏–∑ –≤–∞—à–µ–≥–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–ª—é—á–∞

#### `YC_CLOUD_ID`
- **–ó–Ω–∞—á–µ–Ω–∏–µ**: ID –æ–±–ª–∞–∫–∞ Yandex Cloud
- **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å**: –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω **Cloud ID**

#### `YC_FOLDER_ID`
- **–ó–Ω–∞—á–µ–Ω–∏–µ**: ID –∫–∞—Ç–∞–ª–æ–≥–∞ (Folder ID)
- **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å**: –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω **Folder ID**

#### `YC_REGISTRY_ID`
- **–ó–Ω–∞—á–µ–Ω–∏–µ**: ID —Ä–µ–µ—Å—Ç—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `crp1234567890abcdef`)
- **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å**: Container Registry ‚Üí –≤–∞—à —Ä–µ–µ—Å—Ç—Ä ‚Üí ID –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã

#### `YC_SERVICE_ACCOUNT_ID`
- **–ó–Ω–∞—á–µ–Ω–∏–µ**: ID —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ `deploy-bot` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `aje1234567890abcdef`)
- **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å**: Service Accounts ‚Üí `deploy-bot` ‚Üí ID –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∏–∑ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞):

#### `NEXT_PUBLIC_SUPABASE_URL`
- URL –≤–∞—à–µ–≥–æ Supabase –ø—Ä–æ–µ–∫—Ç–∞

#### `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- Anon Key –¥–ª—è Supabase

#### `NEXT_PUBLIC_SITE_URL`
- URL –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞ (–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –±—É–¥–µ—Ç URL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Yandex Cloud)

#### `OPENROUTER_API_KEY`
- API –∫–ª—é—á OpenRouter (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### `OPENAI_API_KEY`
- API –∫–ª—é—á OpenAI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### `NEXT_PUBLIC_PROXY_URL`
- URL –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### `NEXT_PUBLIC_ENABLE_SIGNUP`
- `true` –∏–ª–∏ `false` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üìã –®–∞–≥ 3: –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π

1. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
   ```bash
   git add .
   git commit -m "Add Yandex Cloud deployment configuration"
   git push origin main
   ```

2. GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤ —Ä–∞–∑–¥–µ–ª–µ **Actions** –Ω–∞ GitHub
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è (5-10 –º–∏–Ω—É—Ç) –ø–æ–ª—É—á–∏—Ç–µ URL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
   - Yandex Cloud Console ‚Üí Serverless Containers ‚Üí `lawer-chat-bot`
   - URL –±—É–¥–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `https://lawer-chat-bot-xxxxx.containers.yandexcloud.net`

## üìã –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –í Yandex Cloud Console –æ—Ç–∫—Ä–æ–π—Ç–µ **Serverless Containers** ‚Üí `jhelper-bot`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **–î–æ–º–µ–Ω—ã**
3. –ù–∞–∂–º–∏—Ç–µ **–î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω**
4. –£–∫–∞–∂–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS-–∑–∞–ø–∏—Å–∏ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ URL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API routes (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/api/projects`)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —á–∞—Ç–∞

URL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
- Yandex Cloud Console ‚Üí Serverless Containers ‚Üí `jhelper-bot`
- URL –±—É–¥–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `https://jhelper-bot-xxxxx.containers.yandexcloud.net`

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏ –Ω–µ–±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ:

- **Container Registry**: ~100‚ÇΩ/–º–µ—Å—è—Ü –∑–∞ —Ä–µ–µ—Å—Ç—Ä
- **Serverless Container**: –æ–ø–ª–∞—Ç–∞ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
  - –í—ã—á–∏—Å–ª–µ–Ω–∏—è: ~0.001‚ÇΩ –∑–∞ 100 –º—Å
  - –ü–∞–º—è—Ç—å: ~0.01‚ÇΩ –∑–∞ –ì–ë√ó—á–∞—Å
  - –ü—Ä–∏–º–µ—Ä–Ω–æ **500-2000‚ÇΩ/–º–µ—Å—è—Ü** –ø—Ä–∏ –Ω–µ–±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

## üêõ Troubleshooting

### –î–µ–ø–ª–æ–π –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ GitHub
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ GitHub Actions
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Service Account –∏–º–µ–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–æ–ª–∏

### –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ Docker –æ–±—Ä–∞–∑–∞

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `output: 'standalone'` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `next.config.mjs`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ –≤ GitHub Actions
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–∑–¥–∞–Ω –≤ Yandex Cloud
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Service Account –∏–º–µ–µ—Ç —Ä–æ–ª—å `serverless.containers.deployer`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Yandex Cloud Console

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ Yandex Cloud Console
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã

### –û—à–∏–±–∫–∞ 413 (Request Entity Too Large) –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞

–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ª–∏–º–∏—Ç —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ –∑–∞–¥–∞—ë—Ç—Å—è –∏–º–µ–Ω–Ω–æ –≤ Yandex Cloud (–∞ –Ω–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏):

1. **–õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**  
   - –ö–æ–Ω—Å–æ–ª—å Yandex Cloud ‚Üí **Serverless Containers** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, `jhelper-bot`) ‚Üí –≤–∫–ª–∞–¥–∫–∞ **–õ–æ–≥–∏** (–∏–ª–∏ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Üí –ª–æ–≥–∏).  
   - –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–∏—Ç–µ –æ—à–∏–±–∫—É: –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–∞–π–ª > 3.5 –ú–ë –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å.  
   - **–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–∏ –æ POST-–∑–∞–ø—Ä–æ—Å–µ** –∫ `/api/projects/.../documents` –≤ –º–æ–º–µ–Ω—Ç –æ—à–∏–±–∫–∏ ‚Äî –∑–∞–ø—Ä–æ—Å –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∑–Ω–∞—á–∏—Ç **413 –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–π –ø–µ—Ä–µ–¥ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º** (API Gateway, Application Load Balancer –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø—Ä–æ–∫—Å–∏ —Å –ª–∏–º–∏—Ç–æ–º ~3.5 –ú–ë).

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–π URL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**  
   - –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ **–ø—Ä—è–º–æ–º—É URL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://jhelper-bot-xxxxx.containers.yandexcloud.net`), –∞ –Ω–µ –ø–æ –¥–æ–º–µ–Ω—É jhelper.ru.  
   - –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É —Ç–æ–≥–æ –∂–µ –±–æ–ª—å—à–æ–≥–æ —Ñ–∞–π–ª–∞.  
   - –ï—Å–ª–∏ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –ø—Ä—è–º–æ–º—É URL –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç, –∞ —á–µ—Ä–µ–∑ jhelper.ru ‚Äî 413, –ª–∏–º–∏—Ç —Å—Ç–æ–∏—Ç –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–µ –¥–æ–º–µ–Ω–∞ (API Gateway / ALB / –ø—Ä–æ–∫—Å–∏ –ø–µ—Ä–µ–¥ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º).

3. **–ì–¥–µ –∏—Å–∫–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–∏–º–∏—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏**  
   –ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö **API Gateway** –≤–∏–¥–µ–Ω –æ—Ç–≤–µ—Ç 413 (–Ω–∞–ø—Ä–∏–º–µ—Ä, `code: 413`, `request_uri: /api/projects/.../documents`), –ª–∏–º–∏—Ç –∑–∞–¥–∞—ë—Ç—Å—è –∏–º–µ–Ω–Ω–æ –≤ API Gateway (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ~3.5 –ú–ë —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞).  
   - **API Gateway**: –ö–æ–Ω—Å–æ–ª—å Yandex Cloud ‚Üí **API Gateway** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à API ‚Üí –≤–∫–ª–∞–¥–∫–∏ **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è** (OpenAPI spec), **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**, **–ö–≤–æ—Ç—ã –∏ –ª–∏–º–∏—Ç—ã**. –í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—ç–∫–µ–Ω–¥–∞/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞; –ø—Ä–∏ –µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤ UI ‚Äî —Å–º. [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API Gateway](https://cloud.yandex.ru/docs/api-gateway/) –∏ —Ä–∞–∑–¥–µ–ª –ø—Ä–æ –ª–∏–º–∏—Ç—ã.  
   - **Application Load Balancer**: –µ—Å–ª–∏ —Ç—Ä–∞—Ñ–∏–∫ –∏–¥—ë—Ç —á–µ—Ä–µ–∑ ALB ‚Äî –ö–æ–Ω—Å–æ–ª—å ‚Üí **Application Load Balancer** ‚Üí –≤–∞—à –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ ‚Üí HTTP-—Ä–æ—É—Ç–µ—Ä / –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç.  
   - **Serverless Containers**: –ª–∏–º–∏—Ç –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —á–µ—Ä–µ–∑ API Gateway –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç API Gateway.

4. **–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞**  
   –û—Ç–≤–µ—Ç –≤ –≤–∏–¥–µ `{"errorCode": 413, "errorMessage": "...", "errorType": "ClientError"}` —Ç–∏–ø–∏—á–µ–Ω –¥–ª—è –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏/—à–ª—é–∑–∞ (API Gateway, ALB), –∞ –Ω–µ –¥–ª—è Next.js. –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ —Ç–∞–∫–æ–π JSON –ø—Ä–∏ 413 ‚Äî —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, —á—Ç–æ –æ—à–∏–±–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –¥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–º–∞–∫—Å–∏–º—É–º 3.5 –ú–ë) –∏ –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ 413. –ß—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Ñ–∞–π–ª—ã –±–æ–ª—å—à–µ 3.5 –ú–ë, –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö API Gateway –≤ Yandex Cloud –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É –≤ –∫–æ–¥–µ (`MAX_DOCUMENT_SIZE_BYTES` –≤ `components/chat-page-client.tsx`).

**–ï—Å–ª–∏ API –æ–ø–∏—Å–∞–Ω —á–µ—Ä–µ–∑ OpenAPI** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/{proxy+}` ‚Üí `x-yc-apigateway-integration` —Å `type: serverless_containers`), –≤ —Å–∞–º–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ Yandex, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, **–Ω–µ –∑–∞–¥–∞—ë—Ç—Å—è** –ª–∏–º–∏—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ ‚Äî —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ API Gateway (~3.5 –ú–ë). –ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
- –í –∫–æ–Ω—Å–æ–ª–∏ Yandex Cloud: **API Gateway** ‚Üí –≤–∞—à API ‚Üí –≤–∫–ª–∞–¥–∫–∏ **–ö–≤–æ—Ç—ã –∏ –ª–∏–º–∏—Ç—ã**, **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞.
- –í [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API Gateway](https://cloud.yandex.ru/docs/api-gateway/) –∏ —Ä–∞–∑–¥–µ–ª–µ –ø—Ä–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (`x-yc-apigateway-*`) ‚Äî —É—Ç–æ—á–Ω–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –ª–∏–º–∏—Ç–∞ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞.
- –ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Yandex Cloud: –º–æ–∂–Ω–æ –ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è API Gateway (–∏–ª–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Serverless Containers).

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Yandex Cloud Serverless Containers](https://cloud.yandex.ru/docs/serverless-containers/)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Container Registry](https://cloud.yandex.ru/docs/container-registry/)
- [GitHub Actions –¥–ª—è Yandex Cloud](https://github.com/marketplace/actions/yandex-cloud-setup)

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–∂–¥—ã–π push –≤ –≤–µ—Ç–∫—É `main` –∏–ª–∏ `master` –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –¥–µ–ø–ª–æ–π –Ω–∞ Yandex Cloud.

–ü—Ä–æ—Ü–µ—Å—Å:
1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
2. ‚úÖ –°–±–æ—Ä–∫–∞ Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. ‚úÖ –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞
4. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—Ä–∞–∑–∞ –≤ Container Registry
5. ‚úÖ –î–µ–ø–ª–æ–π –≤ Serverless Container

–í—Å—ë –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! üéâ

